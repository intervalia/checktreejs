<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Test CheckTreejs</title>
    <link rel="import" href="checktree.html">
  </head>
  <body>
    <check-tree id="testme"></check-tree>
    <script>
    var initialData = [
      { label: 'One', value: {One:'One',a:1,b:2} },
      { label: 'Two', value: 2, children: [
        { label: 'A', value: 'Two.A-SomeValue' },
        { label: 'B', value: 'Two.B-AnotherValue', hasChildren: true },
        { label: 'PI', value: 3.1415 }
      ]},
      { label: 'Three', value: 3 }
    ];

    var children = [
      { label: 'Dog', value: 'Dog-Woof' },
      { label: 'Cat', value: 'Cat-Meow', hasChildren: true },
      { label: 'Pig', value: 'Pig-Grunt' }
    ];

    var cats = [
      { label: 'Tiger', value: 'tiger' },
      { label: 'Puma',  value: 'puma' },
      { label: 'Lion',  value: 'lion' }
    ];

    function eh(e) {
      console.log(JSON.stringify(e.detail,0,2));
    }

    function loadHandler(event) {
      console.log('Need to load for:', event.detail.node);
      var data = event.detail.node=== 'r.1.1' ? children : cats;
      setTimeout(() => {el.addOptions(data, event.detail.node)}, 1000);

    }
    var el = document.getElementById('testme');
    el.addEventListener('changed', eh);
    el.addEventListener('load', loadHandler);
    el.addOptions(initialData);
    </script>
  </body>
</html>
